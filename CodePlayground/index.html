<html>

<head>
  <title>My post</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main"
    href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css"
    integrity="sha512-XjO5XYWl8u7tYF3CItEHgoWh8rtQmDeSzPJq4+4PIrbak7TiqeKbWv/4ZwHZ1HAf5dIWHXoguA/jobn2psKZ7w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
      #resultContainer {
          border: 1px solid #ccc;
          padding: 10px;
          background-color: #f7f7f7;
          margin-top: 10px;
      }
  </style>
</head>

<body>
  <script>
    var require = {
      paths: {
        vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs",
      },
    };
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"
    integrity="sha512-gWqaPfGsZiCkYB6e5mNN4SMRpEvLGItLBqgOAoyLSKtDxWS2O1YPcOeGTy8d8l00gqc8rVue9ae/ncZqhmfj4g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.nls.min.js"
    integrity="sha512-4XY3/LL6Plkq2tXMnatY+se07ZhwFMkZehD5Z68HrKoSL3BTyLDjwFomhUWixKu8VUw6jWe/8RXT1WtH95lLFg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.js"
    integrity="sha512-CK3czr9gLG2z/ygdSM+gNenkN9AShfpW4gMjVyY06VgFHLoc4OCoO92Z8UkcBwVX0ufoYbJw3IVs1mHfXQeI3g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <h1>Snippet</h1>

  <pre id="CodeBlock" data-lang="csharp">
    using System;
    public class Program
    {
      public static void Main()
      {
        Console.WriteLine(LibMethod());
      }
      public static bool LibMethod()
      {
        return true;
      }
    }
    </pre>
  <button onclick="runCode()">Run Code</button>
  <div id="resultContainer"></div>

  <script>
    var codeContent = $.trim($("#CodeBlock").text());
    $("#CodeBlock").html("");
    var editorCodeBlock = monaco.editor.create(
      document.getElementById("CodeBlock"),
      {
        value: codeContent,
        language: "csharp",
        theme: "vs",
        lineNumbers: "on",
        glyphMargin: false,
        vertical: "auto",
        horizontal: "auto",
        verticalScrollbarSize: 10,
        horizontalScrollbarSize: 10,
        scrollBeyondLastLine: false,
        readOnly: false,
        automaticLayout: true,
        minimap: {
          enabled: true,
        },
        lineHeight: 19,
      }
    );
    $("#CodeBlock").height(400);

    function runCode() {
      var codeToRun = editorCodeBlock.getValue();

      // Send the code to the server for execution
      $.ajax({
        type: "POST",
        url: "https://localhost:7063/api/compiler",
        contentType: "application/json",
        data: JSON.stringify({ code: codeToRun }),
        success: function (result) {
          $("#resultContainer").text(result);

          console.log(result);
        },
        error: function (error) {
          console.error(error);
        },
      });
    }
  </script>
</body>

</html>